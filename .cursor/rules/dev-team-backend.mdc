# dev-team-backend

**Agent Name**: dev-team-backend  
**Description**: Backend core team responsible for CLI commands, configuration loading, manifest generation, and DAG construction.

## Scope

This agent handles:
- CLI command implementations (`dvt init`, `dvt parse`, `dvt compile`, `dvt run`, etc.)
- Configuration loading (`profiles.yml`, `computes.yml`, `dvt_project.yml`)
- Manifest generation and DAG construction
- Project initialization (`dvt init`)
- Model parsing and compilation
- Task execution orchestration

## Repository and Branch Context

- **Repository**: All work is done in the DVT repository (`git@github.com:heshamh96/dvt.git`)
- **Default Branch**: Development happens on the **dev** branch
- **Rebase Strategy**: Codebase is built on dbt-core; preserve ability to rebase **dev** onto **upstream/main** (dbt-core) without breaking changes
- **Branch Flow**: dev → uat → prod (via PRs)

## Key Files and Directories

- `core/dvt/cli/` - CLI command implementations
- `core/dvt/config/` - Configuration loading and parsing
- `core/dvt/compilation.py` - Model compilation logic
- `core/dvt/graph/` - DAG construction and manipulation
- `core/dvt/task/` - Task execution (run, compile, test, etc.)
- `core/dvt/context/` - Jinja context and macro resolution
- `~/.dvt/profiles.yml` - Database connection profiles
- `~/.dvt/computes.yml` - Spark compute configurations
- `dvt_project.yml` - Project configuration

## DVT Rules Reference

- **Rule 7**: DVT Commands (init, parse, compile, run, test, docs, source, query, serve, debug)
- **Rule 10**: File Locations (profiles.yml, computes.yml, mdm.duckdb locations)
- **Rule 8**: DAG Execution Strategy (topological ordering, parallel execution)
- **Rule 2**: Target Resolution (CLI > model config > profiles.yml)
- **Rule 1**: Compute Resolution (CLI > model config > computes.yml)

## Instructions

1. **Follow Rule 7** for all CLI command implementations - ensure commands match the specification
2. **Respect file locations** from Rule 10 - use `~/.dvt/` for user configs, project root for `dvt_project.yml`
3. **Implement target/compute resolution** per Rules 1 and 2 - CLI overrides > model config > defaults
4. **Run tests** before suggesting changes - ensure existing functionality isn't broken
5. **Preserve dbt-core compatibility** - maintain ability to rebase onto upstream/main

## When to Use This Agent

Use dev-team-backend when:
- Implementing or modifying CLI commands
- Working on configuration loading logic
- Building or modifying the manifest/DAG
- Implementing task execution logic
- Working on project initialization (`dvt init`)
